<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        
        #box {
            width: 100px;
            height: 100px;
            position: relative;
            left: 10px;
            background-color: lightblue;
        }
    </style>
</head>

<body>
    <div id="box"></div>
</body>
<script type="text/javascript" src="./utils.js"></script>
<script type="text/javascript">
    // 71匀速运动
    // 1.定步长运动 
    var oBox = document.getElementById("box");
    var maxLeft = document.documentElement.clientWidth || document.body.clientWidth;
    var distance = maxLeft - box.offsetWidth,
        totalTime = 2000,
        interval = 100,
        step = distance / totalTime * 100;
    // oBox["style"]["left"] = "0px";
    // var timer1 = window.setInterval(function() {
    //     var left = parseFloat(window.getComputedStyle(oBox, null)["left"]);
    //     if (left >= distance) {
    //         clearInterval(timer1)
    //             // 没有return,继续执行外层代码
    //         return;
    //     }
    //     oBox["style"]["left"] = (left + step) + "px";
    // }, interval);

    // 2. 创建匀速运动函数,规定时间
    // 当前行走时间t, 起始位置b, 总时间d, 总距离c, 返回当前元素位置
    // function Linear(t, b, c, d) {
    //     return c * t / d + b;
    // }
    // var time = null,
    //     begin = 0,
    //     change = distance,
    //     duration = totalTime,
    //     target = distance;
    // var timer2 = window.setInterval(function() {
    //     time += 10;
    //     if (time >= totalTime) {
    //         utils.css(oBox, "left", target);
    //         window.clearInterval(timer2);
    //         return;
    //     }
    //     var curPos = Linear(time, begin, change, duration);
    //     utils.css(oBox, "left", curPos);
    // }, 10);

    // 73 setTimeout设置动画
    function move() {
        var curLeft = utils.css(oBox, "left");
        if (curLeft + step >= maxLeft) {
            utils.css(oBox, "left", maxLeft);
            return;
        }
        curLeft += step;
        utils.css(oBox, "left", curLeft);
        timer = window.setTimeout(move, 10); // 最后执行
    }
    move();
</script>

</html>